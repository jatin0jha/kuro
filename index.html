<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.svgrepo.com/show/474291/arrow-short-left.svg">
    <meta name="description"
        content="Welcome to Artistry Hub, a specialized platform designed for 2D and 3D artists. Showcase your work, connect with fellow creators, and explore inspiring content.">
    <meta name="keywords" content="Artistry Hub, 2D artists, 3D artists, digital art, creative platform">
    <meta name="google-adsense-account" content="ca-pub-6321515918255529">
    <meta name="author" content="Ded">
    <title>Artistoty</title>
    <style>
        body {
            background-color: #F0EFE3;
            margin: 0;
            color: #65645c;
        }

        .dark-mode {
            background-color: rgb(23, 23, 23);
            filter: invert(1);
        }

        .dark-mode img {
            filter: invert(1);
        }

        .dark-mode .book-shadow {
            filter: invert(1);
        }

        .dark-mode .book-shadow img {
            filter: invert(0);
        }

        .theme-switch {
            aspect-ratio: 1;
            border: none;
            background-image: url('https://www.svgrepo.com/show/529974/sun.svg');
            background-size: cover;
            height: 30px;
            background-color: rgb(227, 227, 214);
            border-radius: 50%;
        }

        .dark-mode .theme-switch {
            background-image: url('https://www.svgrepo.com/show/529729/moon.svg');
        }

        a {
            text-decoration: none;
            color: inherit;
            outline: none;
            transition: all 0.4s ease-in-out;
            -webkit-transition: all 0.4s ease-in-out;
        }

        nav {
            display: flex;
            margin: 5px;
            position: sticky;
            top: 10px;
            z-index: 5;
        }

        ::-webkit-scrollbar {
            width: 3px;
            height: 0;
        }

        ::-webkit-scrollbar-track {
            background: #00000000;
        }

        ::-webkit-scrollbar-thumb {
            background: #5f5f5f;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #989898;
        }

        .mainGrid {
            display: grid;
            grid-template-columns: 230px auto;
            transition: grid-template-columns 0.3s ease;
        }

        .mainGrid.collapsed {
            grid-template-columns: 0 auto;
        }

        .sideBar {
            height: calc(100vh - 24px);
            padding: 12px;
            transition: background-color 0.3s ease;
            border-right: 1px solid rgb(217, 217, 217);
        }

        .sideBar h4 {
            overflow: hidden;
            margin: 20px 0;
        }

        .responsive-logo {
            width: 40px;
        }

        .history {
            height: calc(100vh - 110px);
            overflow-x: scroll;
        }

        .chatInstance {
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px 0;
        }

        .chatInstance:hover {
            background-color: #d4d3c9;
        }

        .history .active {
            background-color: #d4d3c9;
        }

        .copy-button {
            background-color: transparent;
            outline: none;
            border: none;
            color: white;
            cursor: pointer;
        }

        .search-bar {
            outline: none;
            border: none;
            background-color: #d4d3c96a;
            color: rgb(0, 0, 0);
            padding: 10px 10px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            margin: 0 auto;
            width: calc(100% - 40px);
            margin-left: 5px;
            backdrop-filter: blur(10px);
            border: 1px solid rgb(206, 205, 199);
        }

        .book-shadow {
            aspect-ratio: 5/7;
            box-shadow: -10px 5px 10px rgba(0, 0, 0, 0.344);
        }

        .book-cover {
            aspect-ratio: 5/7;
            border-radius: 0 10px 10px 0;
            width: 100%;
            border-right: 2px solid rgb(255, 255, 255);
            box-shadow: 1px 0px 0px black;
        }

        .book-card:hover {
            scale: 1.05;
        }

        .book-card {
            width: min-content;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 96%;
        }

        .book-card p {
            text-align: center;
            margin-top: 10px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 18px;
        }

        .files-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr;
            gap: 10px;
            margin: 10px;
        }

        .chatGrid {
            height: 100vh;
            overflow-y: scroll;
        }

        .addBook {
            position: fixed;
            bottom: 10px;
            right: 20px;
            background-color: #000000;
            padding: 12px 24px;
            border-radius: 10px;
            color: #eeede2;
        }

        #loading {
            display: flex;
            align-items: center;
            justify-content: center;
            height: calc(100vh - 200px);
        }

        #filter {
            border: none;
            padding: 3px 8px;
            margin: 5px;
            border-radius: 5px;
            outline: none;
        }

        #contact-us form {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 200px);
            align-items: left;
            justify-content: center;
            margin: 10px;
            max-width: 700px;
        }


        #contact-us form input {
            width: max-content;
            margin: 5px 0;
            padding: 5px;
            border-radius: 10px;
            border: 1px solid rgb(184, 186, 175);
            background-color: rgba(255, 255, 255, 0.34);
            backdrop-filter: blur(10px);
            outline: none;
        }

        #contact-us form textarea {
            margin: 5px 0;
            padding: 5px;
            border-radius: 10px;
            border: 1px solid rgb(184, 186, 175);
            background-color: rgba(255, 255, 255, 0.34);
            backdrop-filter: blur(10px);
            outline: none;
            resize: none;
        }

        #contact-us form input[type=submit] {
            max-width: min-content;
            margin: 5px 0;
            padding: 3px 10px;
            border-radius: 10px;
            border: 1px solid rgb(184, 186, 175);
            background-color: rgba(255, 255, 255, 0.34);
            backdrop-filter: blur(10px);
            outline: none;
            margin-left: auto;
        }

        #statusMessage {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            display: none;
            text-align: center;
        }

        .success {
            background-color: #d4edda;
            color: #155724;
        }

        .failure {
            background-color: #f8d7da;
            color: #721c24;
        }

        .hidden {
            display: none;
        }

        .hero {
            background-image: url('https://i.pinimg.com/originals/fb/ec/6b/fbec6b7428573f785bac244d23550949.gif');
            /* Replace 'hero-background.jpg' with your actual image */
            background-size: cover;
            background-position: center;
            text-align: center;
            padding: 20vh 0;
            border-radius: 10px;
            margin: 10px;
        }

        .hero h1 {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .about {
            padding: 50px 20px;
        }

        .about h2 {
            font-size: 2em;
            margin-bottom: 20px;
        }

        .about p {
            font-size: 1.2em;
            line-height: 1.6;
        }

        .chatGri {
            display: grid;
            grid-template-rows: auto 60px;
            height: calc(100vh - 100px);
        }

        .sendTxt {
            background-color: rgb(230, 230, 219);
            margin: 10px;
            border-radius: 10px;
            display: flex;
        }

        .sendTxt input {
            background: transparent;
            border-radius: 10px;
            width: 100%;
            border: none;
            outline: none;
            padding: 10px;
        }

        .message {
            max-width: 70%;
            display: inline-block;
            clear: both;
            margin: 5px 0;
        }

        .message.user {
            text-align: right;
            float: right;
        }

        .message.other {
            text-align: left;
            float: left;
        }

        .timestamp {
            font-size: 0.8em;
            color: #6c757d;
        }

        .sendTxt button {
            border-radius: 10px;
            border: none;
            outline: none;
            background-color: #d4d3c9;
            aspect-ratio: 2;
        }

        .MsgGrid {
            padding: 5px;
            overflow-y: scroll;
        }



        /* Media query for screen width under 675px */
        @media (max-width: 675px) {
            .mainGrid {
                grid-template-columns: 0 auto;
            }

            .mainGrid.collapsed {
                grid-template-columns: 200px auto;
                transition: grid-template-columns 0.3s ease;
            }


            .mainGrid .sideBar {
                background-color: transparent;
            }

        }

        @media (max-width:1350px) {
            .files-grid {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            }
        }

        @media (max-width:1200px) {
            .files-grid {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr 1fr;
            }
        }

        @media (max-width:1000px) {
            .files-grid {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr;
            }
        }

        @media (max-width:800px) {
            .files-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="mainGrid" id="mainGrid">
        <div class="sideBar">
            <h4>Artistory</h4>
            <div class="history">
                <div class="chatInstance active" data-section="library" onclick="showSection('library')">Home</div>
                <div class="chatInstance" data-section="contact-us" onclick="showSection('contact-us')">Contact us</div>
                <div class="chatInstance" data-section="chats" onclick="showSection('chats')">Chats</div>
                <div class="chatInstance" data-section="about" onclick="showSection('about')">About</div>
            </div>
            <button onclick="themeSwitch()" class="theme-switch"></button>
        </div>
        <div class="chatGrid">
            <nav>
                <img src="https://www.svgrepo.com/show/474291/arrow-short-left.svg" onclick="navSlider()"
                    class="responsive-logo" alt="">
                <input type="text" id="searchInput" class="search-bar" oninput="searchFiles()"
                    placeholder="Search for books..." />
            </nav>
            <div id="library" class="section">
                <select id="filter">
                    <option>First uploaded</option>
                    <option>Last uploaded</option>
                    <option>A - Z</option>
                </select>
                <div class="files-grid" id="myContentContainer">
                </div>
                <div id="loading">
                    <img src="https://i.pinimg.com/originals/04/67/92/046792dc1254482c009f0737858bae18.gif"
                        style="border-radius: 50%; height: 250px;" alt="Loading...">
                </div>
            </div>
            <div id="contact-us" class="section" style="display: none;">
                <form id="contactForm" onsubmit="sendMessageD(event)">
                    <h1>Artistory</h1>
                    <p>If you have any questions, comments, or feedback, feel free to reach out to us. We're here to
                        help and would love to hear from you!</p>
                    <input type="text" id="nameInput" placeholder="Enter name" required>
                    <textarea id="messageInput" rows="5" placeholder="Write message" required></textarea>
                    <input type="submit" value="Send">
                    <div id="statusMessage" class="hidden"></div>
                </form>

                <script>
                    async function sendMessageD(event) {
                        event.preventDefault(); // Prevent form from refreshing the page
                
                        // Collect input values
                        const nameInput = document.getElementById('nameInput').value.trim();
                        const messageInput = document.getElementById('messageInput').value.trim();
                        const statusMessage = document.getElementById('statusMessage');

                        const encodedWebhookUrl = 'aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTMzMDU3NDE2NTcyNzY0MTY2MS9jSVlzZnN5LXBaaE41MVlwaWttaDhPV3hueWNlaEgyY3RRZWI3dEF1RWMxd3M5bFVrTzd5LWh3c2NOejJvdTVoZDJ0cw==';

                        const webhookUrl = atob(encodedWebhookUrl);
                
                        // Basic validation
                        if (!nameInput || !messageInput) {
                            statusMessage.textContent = "Both fields are required.";
                            statusMessage.className = "error";
                            statusMessage.classList.remove("hidden");
                            return;
                        }

                        const payload = {
                            content: `**Name:** ${nameInput}\n**Message:** ${messageInput}`
                        };

                        try {
                            const response = await fetch(webhookUrl, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify(payload),
                            });
                
                            if (response.ok) {
                                statusMessage.textContent = "Message sent successfully!";
                                statusMessage.className = "success";
                                statusMessage.classList.remove("hidden");
                
                                // Reset the form
                                document.getElementById('contactForm').reset();
                            } else {
                                throw new Error('Failed to send message. Please try again later.');
                            }
                        } catch (error) {
                            console.error(error);
                            statusMessage.textContent = error.message;
                            statusMessage.className = "error";
                            statusMessage.classList.remove("hidden");
                        }
                    }
                </script>


            </div>
            <div id="chats" class="section" style="display: none;">
                <div class="chatGri">
                    <div id="messages" class="MsgGrid"></div>
                    <form id="messageForm" class="sendTxt">
                        <input id="message" type="text" placeholder="Send a message..." required>
                        <button type="submit">Send</button>
                    </form>
                </div>
            </div>

            <div id="about" class="section" style="display: none;">

                <div class="hero">
                    <h1>Welcome to Artistry Hub</h1>
                    <p>A specialized platform for 2D and 3D artists</p>
                </div>
                <section class="about">
                    <h2>About Our Project</h2>
                    <p>Welcome to Artistry Hub, a specialized platform designed with 2D and 3D artists in mind. Our
                        project is dedicated
                        to providing a seamless and intuitive experience for artists to showcase their work, connect
                        with fellow
                        creators, and explore a wealth of inspiring content.</p>

                    <h2>Why This Project?</h2>
                    <p>In the dynamic world of digital artistry, finding the right platform to exhibit your
                        creations
                        and connect with
                        like-minded individuals can be challenging. That's where Artistry Hub comes in. Built by
                        artists, for artists,
                        our project offers a tailored environment that celebrates the diversity and creativity of
                        the 2D
                        and 3D art
                        community.</p>

                    <h2>What Sets Us Apart</h2>
                    <p><b>Artist-Centric Approach:</b> We understand the unique needs and challenges faced by 2D and
                        3D
                        artists. That's
                        why our project is designed to prioritize the needs of creators, providing them with the
                        tools
                        and resources
                        they need to thrive.</p>

                    <p><b>Inspiration and Collaboration:</b> Whether you're looking for inspiration for your next
                        project
                        or seeking
                        collaborators for a new venture, Artistry Hub is the perfect place to connect with fellow
                        artists, share ideas,
                        and collaborate on exciting new projects.</p>

                    <p><b>Diverse Showcase:</b> From stunning 2D illustrations to immersive 3D renders, our platform
                        offers a diverse
                        showcase of artwork from talented artists around the globe. Explore a wide range of styles,
                        techniques, and
                        genres, and discover new favorites along the way.</p>

                    <h2>Join Us Today</h2>
                    <p>Whether you're an established artist or just starting on your creative journey, Artistry Hub
                        is
                        here to support
                        you every step of the way. Join our community today and unlock a world of possibilities for
                        your
                        artistry. Let
                        your imagination soar and your creativity thrive with Artistry Hub.</p>
                </section>
            </div>
        </div>
        <a href="https://forms.gle/Y167pEFsU8ApMCMm7" class="addBook" target="_blank">Add Book</a>
    </div>

    <script>
        function navSlider() {
            const mainGrid = document.getElementById("mainGrid");
            mainGrid.classList.toggle("collapsed");
        }
    </script>

    <script>
        let searchData; // To store the original data for reset

        // Hide the content container and show the loading animation
        document.getElementById("myContentContainer").style.display = "none";
        document.getElementById("loading").style.display = "flex";

        fetch('https://script.googleusercontent.com/macros/echo?user_content_key=q4wwBgNWIKYx4Eu7_GOqNuiQS1U6pATiPYRrojAmxjq9ELwCCRmmdDKDbnTZ8DcZm2u_5E-VUyM-TEBO7JbGIFHn_N0BhvcBm5_BxDlH2jW0nuo2oDemN9CCS2h10ox_1xSncGQajx_ryfhECjZEnN3qIGTLz4U0QCznjMAiFIBjg3sDBxIuBUFb6llJZ-HsCkaRr-U-pvhhonTEC3cIx8Mz7f7RLIjIfcJSmWxs5bNBKABpDR5oUg&lib=MTKY7IWoEIUZ-OaLI0TuvsCUIHiZ-_zcK')
            .then(res => res.json())
            .then(data => {
                // Once the data is loaded, hide the loading animation and show the content container
                document.getElementById("myContentContainer").style.display = "grid";
                document.getElementById("loading").style.display = "none";

                searchData = data.content; // Store the original data for reset
                renderFiles(data.content); // Render the files initially
            })
            .catch(error => {
                console.error('Error fetching data:', error);
                // In case of an error, hide the loading animation and show an error message
                document.getElementById("loading").innerHTML = "Error fetching data. Please try again later :')";
            });

        // Function to render files based on search input
        function renderFiles(data) {
            let content = '';

            // Iterate over the data to create content for each item
            data.forEach(item => {
                let title = item[2];
                let description = item[3];
                let pdfLink = item[4];
                let coverImage = item[5]; // Assuming the cover image URL is in the 6th column

                // Check if the cover image URL is valid
                if (coverImage && (coverImage.startsWith("http://") || coverImage.startsWith("https://"))) {
                    let itemHTML = `<a href="${pdfLink}" target="_blank">
                        <div class="book-card">
                            <div class="book-shadow">
                                <img class="book-cover"
                                    src="${coverImage}" loading="lazy" alt="">
                            </div>
                            <p>${title}</p>
                        </div></a>`;
                    content += itemHTML;
                }
            });

            // Populate the content into the content container
            document.getElementById("myContentContainer").innerHTML = content;
        }
        // Function to handle search input
        function searchFiles() {
            const searchTerm = document.getElementById("searchInput").value.trim().toLowerCase();

            // Filter files based on the search term
            let filteredData = searchData.filter(item => {
                const title = item[2]?.toLowerCase() || ""; // Safely access title
                const description = item[3]?.toLowerCase() || ""; // Safely access description
                return title.includes(searchTerm) || description.includes(searchTerm);
            });

            // Apply filter to the search results
            applyFilter(filteredData);
        }

        // Add event listener to the filter dropdown
        document.getElementById("filter").addEventListener("change", () => searchFiles());

        function applyFilter(data) {
            const filterValue = document.getElementById("filter").value;

            // Clone the data to avoid modifying the original array
            let sortedData = [...data];

            switch (filterValue) {
                case "First uploaded":
                    // Assuming books are already in the order of first uploaded
                    // Do nothing, render as is
                    break;
                case "Last uploaded":
                    // Reverse the order for last uploaded
                    sortedData.reverse();
                    break;
                case "A - Z":
                    // Sort alphabetically by title (column index 2)
                    sortedData.sort((a, b) => a[2].localeCompare(b[2]));
                    break;
                default:
                    break;
            }

            // Render the sorted and filtered files
            renderFiles(sortedData);
        }
    </script>

    <script>
        function showSection(sectionId) {
            // Remove 'active' class from all navigation links
            const chatInstances = document.querySelectorAll('.chatInstance');
            chatInstances.forEach(instance => instance.classList.remove('active'));

            // Add 'active' class to the clicked link
            const activeLink = document.querySelector(`.chatInstance[data-section="${sectionId}"]`);
            if (activeLink) activeLink.classList.add('active');

            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => (section.style.display = 'none'));

            // Show the corresponding section
            const activeSection = document.getElementById(sectionId);
            if (activeSection) activeSection.style.display = 'block';
        }
    </script>

    <script>
        let lastMessageTimestamp = null; // Keep track of the last message timestamp to prevent duplication

        function getUserName() {
            return prompt("Please enter your name:");
        }

        function setUsername() {
            let username = localStorage.getItem("username");
            if (!username) {
                username = getUserName();
                localStorage.setItem("username", username);
            }
            return username;
        }

        async function fetchMessages() {
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbwpy4g8FciXf1d3dpqjN7Sbjvt57GJyHdclqck1Jmq5FZThQokqr21tThxezc_4IPvdng/exec');
                const data = await response.json();
                if (data.error) throw new Error(data.error);

                const newMessages = data.content.filter(message => {
                    const timestamp = new Date(message[0]);
                    return !lastMessageTimestamp || timestamp > lastMessageTimestamp;
                });

                if (newMessages.length) {
                    lastMessageTimestamp = new Date(newMessages[newMessages.length - 1][0]);
                    newMessages.forEach(row => displayMessage({ timestamp: row[0], username: row[1], message: row[2] }));
                }
            } catch (error) {
                console.error('Error:', error);
            }
        }

        function displayMessage({ timestamp, username, message }) {
            const isUser = username === setUsername();
            const messageElement = `
                            <div class="message ${isUser ? 'user' : 'other'}">
                                <div><strong>${username}</strong>: ${message}</div>
                                <div class="timestamp">${timestamp}</div>
                            </div>
                        `;
            document.getElementById('messages').innerHTML += messageElement;
        }

        async function sendMessage(event) {
            event.preventDefault();
            const message = document.getElementById('message').value;
            const username = setUsername();

            try {
                await fetch(`https://script.google.com/macros/s/AKfycbwpy4g8FciXf1d3dpqjN7Sbjvt57GJyHdclqck1Jmq5FZThQokqr21tThxezc_4IPvdng/exec?message=${encodeURIComponent(message)}&username=${encodeURIComponent(username)}`);
                document.getElementById('messageForm').reset();
            } catch (error) {
                console.error('Error:', error);
            }
        }

        // Poll for new messages every 2 seconds
        function startPolling() {
            setInterval(fetchMessages, 2000); // Fetch messages every 2 seconds
        }

        window.onload = function () {
            setUsername();
            fetchMessages(); // Initial fetch
            startPolling(); // Start polling for real-time updates
            document.getElementById('messageForm').addEventListener('submit', sendMessage);
        };
    </script>

    <script>
        function themeSwitch() {
            var element = document.body;
            element.classList.toggle("dark-mode");

            // Save the current theme to localStorage
            if (element.classList.contains("dark-mode")) {
                localStorage.setItem("theme", "dark");
            } else {
                localStorage.setItem("theme", "light");
            }
        }

        function applySavedTheme() {
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme === "dark") {
                document.body.classList.add("dark-mode");
            }
        }

        function initChatApp() {
            setUsername();
            fetchMessages(); // Initial fetch
            startPolling(); // Start polling for real-time updates
            document.getElementById('messageForm').addEventListener('submit', sendMessage);
        }

        // Use event listeners to avoid overwriting onload
        window.addEventListener("load", applySavedTheme); // Apply theme on load
        window.addEventListener("load", initChatApp); // Initialize the chat app on load
    </script>

</body>

</html>
